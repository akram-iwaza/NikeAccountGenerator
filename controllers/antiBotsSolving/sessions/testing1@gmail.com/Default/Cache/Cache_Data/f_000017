{"version":3,"sources":["webpack://webShellClient/webpack/universalModuleDefinition","webpack://webShellClient/webpack/bootstrap","webpack://webShellClient/../web-shell-shared/dist/index.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/cache/js-cookie-npm-2.2.1-e879cd2148-c110f78427.zip/node_modules/js-cookie/src/js.cookie.js","webpack://webShellClient/./src/locale.ts","webpack://webShellClient/./src/modals.ts","webpack://webShellClient/./src/helpers/reactInstanceFactory.ts","webpack://webShellClient/./src/userLocation.ts","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/index.js","webpack://webShellClient/./src/translations.ts","webpack://webShellClient/./src/analytics.ts","webpack://webShellClient/./src/identity/identityConfig.ts","webpack://webShellClient/./src/internal/webShellClientInfo.ts","webpack://webShellClient/./src/newRelicUtils.ts","webpack://webShellClient/./src/identity/identity.ts","webpack://webShellClient/./src/identity/storage.ts","webpack://webShellClient/./src/optimization/adobe/adobeTargetOptimization.ts","webpack://webShellClient/./src/optimization/noop/noopOptimization.ts","webpack://webShellClient/./src/factory.ts","webpack://webShellClient/./src/identity/shared.ts","webpack://webShellClient/(webpack)/buildin/global.js","webpack://webShellClient/./src/release.ts","webpack://webShellClient/./src/index.ts","webpack://webShellClient/../web-shell-shared/dist/constants.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/analytics/index.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/analytics/DataCaptureAnalytics.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/analytics/WebShellAnalytics.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/ModalManager.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/PreFetchDependencies.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/ReactInstanceFactory.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/RemoteComponentsName.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/UniteCredential.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/WebShellClient.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/WebShellIdentity.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/WebShellInternal.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/WebShellLocale.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/WebShellOptimization.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/WebShellTranslations.js","webpack://webShellClient//tmp/jenkins/workspace/web-shell_Publish_Packages_main/.yarn/$virtual/@nike-web-shell-types-virtual-8c21d8a514/1/packages/web-shell-types/dist/WebShellUserLocation.js","webpack://webShellClient/external \"React\""],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__29__","webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","installedModules","0","__webpack_require__","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","oldJsonpFunction","slice","s","__createBinding","this","k","k2","__exportStar","OldCookies","Cookies","api","noConflict","extend","result","arguments","attributes","decode","replace","decodeURIComponent","init","converter","set","path","defaults","expires","Date","toUTCString","JSON","stringify","test","write","encodeURIComponent","String","escape","stringifiedAttributes","attributeName","split","cookie","json","jar","cookies","parts","join","charAt","read","parse","getJSON","remove","withConverter","DotcomWebShellLocale","initialLocale","hasTrackedInit","warn","newrelic","addPageAction","webShellClientVersion","current","defaultLocale","defaultModalRoot","ModalManager","rootSelector","setActiveModalID","id","activeModalID","setReferringElement","refEl","closeVanilla","REACT","REACT_DOM","REMOTE","ReactInstanceFactory","globalWindow","configs","fetchPromise","isDefined","prefetchDependencies","async","dependencies","dependenciesExtended","getDependenciesForPrefetch","notExistDependencies","getNotExistDependencies","fetchDependencies","renderRemoteComponent","remoteComponentName","renderIntoId","configureDependenciesBeforeRender","validateDependencies","component","getRemoteComponentByName","checkIsValidReactElement","renderComponentInDom","render","_instance","_window","_remoteComponents","isExistOnWindow","dependency","vendorScriptURL","body","then","loadReactOrReactDOMHandleSuccess","catch","loadReactOrReactDOMHandleFailure","response","_remoteModule","RemoteComponent","appendToComponent","getElementById","customWrapperId","customWrapper","reduce","acc","remotePromise","loadRemote","loadReactOrReactDOM","allSettled","apply","oneOfDependenciesNotExist","find","isValidElement","isContainRemoteDependency","includes","ComponentCustom","endpoint","prefetch","GEOLOC_COOKIE_NAME","geolocKeysMap","cc","rc","la","lo","DotcomWebShellUserLocation","readCookie","userLocation","userData","keyValue","entries","defaultUserLocation","DotcomWebShellTranslations","locale","fetch","namespaces","options","getURL","namespace","urlBase","hreflang","results","map","allTranslations","translation","index","assign","formatMessage","messageValue","params","_","token","defaultAnalyticsOptions","writeKey","accountsCountries","uniteCountries","webShellClientInfo","getWebShellClientInfo","webShellClientInfoDispatch","reset","initializeIdentity","userManager","identityProvider","pageActionName","processedAttributes","removeUndefinedProperties","webShellClient","__VERSION__","isSwooshUser","profile","userType","swoosh","callBackRouteRegex","isNotACallbackRoute","exec","location","pathname","IS_SIGNED_IN_COOKIE_PARAMS","domain","setIsSignedInCookie","shouldSilentlySignIn","user","Boolean","referrer","origin","expired","makeIdentity","internalIsUnite","userManagerPromise","instance","isClient","isUnite","isIdentityProviderUnite","reason","uniteSessionCookie","uniteMobileSessionCookie","identityProviderCookie","localeCountry","country","getIsIdentityProviderUnite","toString","UniteManager","UserManager","WebStorageStateStore","userStore","authority","client_id","redirect_uri","NEXT_PUBLIC_REDIRECT_URI","post_logout_redirect_uri","NEXT_PUBLIC_POST_LOGOUT_REDIRECT_URI","silent_redirect_uri","NEXT_PUBLIC_SILENT_REDIRECT_URI","response_type","scope","loadUserInfo","automaticSilentRenew","monitorSession","createOIDCSettings","store","localStorage","getUser","signinSilent","_init","getUserProfile","avatarUrl","picture","avatar_url","entity","avatar","fullUrl","firstName","given_name","altFirstName","kana","given","alternate","jpFirstNameKana","altLastName","family","jpLastNameKana","lastName","family_name","email","account","mobileNumber","phone_number","upmId","sub","registeredCountry","signInFlow","flow","shapeUserProfile","identityObject","initialize","getAccessToken","access_token","getInitialized","unite","getUnite","isInitialized","getIsLoggedIn","getIsMobileVerified","getUserState","phone_number_verified","getIsSwooshUser","getVisitData","shared","processReauth","signinSilentCallback","processSignIn","signinCallback","processSignOut","signoutCallback","removeItem","signIn","args","currentUrl","href","state","redirectUrl","signinRedirect","signOut","nike","session","logout","signoutRedirect","locations","super","getLocations","getLocationsArgument","adobe","currentLocations","_locations","offerOptions","getOptions","offers","getOffers","transformAdobeOffersToGetLocationsResult","noticeError","host","errorName","errorMessage","stackTrace","stack","identity","userId","loggedIn","context","channel","experienceCloud","analytics","logging","execute","mboxes","parameters","profileParameters","mbox","content","payload","tnta","defaultWebShellClientOptions","appName","modal","isProduction","optimization","WebShellClientFactory","getInstance","translations","modalManager","getDotcomWebShellOptimization","analyticsOptions","getContext","load","log","debug","enable","track","eventName","properties","callback","page","pageCategory","pageName","dotcomNoopAnalyticsFactory","analyticsClient","finalOptions","segmentWriteKey","eventNameOrEvent","maybeProperties","maybeOptions","maybeCallback","pageCategoryOrEvent","maybePageName","dotcomWebShellAnalyticsFactory","__WS_UNSTABLE__","__WS_INTERNAL__","getInfo","enabled","fn","addEventListener","g","Function","addRelease","global","__shell","_a","_b","_c","_d","_e","_f","_g","_h","_j","_k","DEFAULT_USER_LOCATION_DATA","DEFAULT_LOCALE_DATA","DEFAULT_WEB_SHELL_CLIENT_INFO","ANALYTICS_SCRIPT","NONPROD_UNITE_SCRIPT","PROD_UNITE_SCRIPT","DATA_CAPTURE_SCRIPT","MODAL_ROOT_ID","REMOTE_COMPONENTS_URL","VENDOR_SCRIPT_REACT_DOM_URL","VENDOR_SCRIPT_REACT_URL","HOST_NAME","REMOTE_COMPONENTS_NAME","KEEPALIVE","PRE_FETCH_DEPENDENCIES","HTTP_KEEPALIVE_TIMEOUT","HTTP_HEADERS_TIMEOUT","CMS_THREAD","RECOMMENDATIONS","WS_HOST_NAME","WS_DATA_CAPTURE_SCRIPT","NEXT_PUBLIC_DATA_CAPTURE_SCRIPT","WS_PROD_UNITE_SCRIPT","NEXT_PUBLIC_PROD_UNITE_SCRIPT","WS_NONPROD_UNITE_SCRIPT","NEXT_PUBLIC_NONPROD_UNITE_SCRIPT","WS_ANALYTICS_SCRIPT","NEXT_PUBLIC_ANALYTICS_SCRIPT","cloudUrlFragment","countryName","countryNames","en","currency","currencySymbol","default","intl","langRegion","language","merchGroup","urlParam","translationsLanguage","latitude","longitude","WebShellOptimization"],"mappings":"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","file":"bundle.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"React\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"webShellClient\"] = factory(require(\"React\"));\n\telse\n\t\troot[\"webShellClient\"] = factory(root[\"React\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__29__) {\nreturn "," \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".chunk.\" + {\"1\":\"31672e\",\"2\":\"b29538\",\"3\":\"b06a94\",\"4\":\"b8d08f\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"https://www.nike.com/static/uxf/web-shell-client/2.6.0/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonpwebShellClient\"] = window[\"webpackJsonpwebShellClient\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./constants\"), exports);\n//# sourceMappingURL=index.js.map","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","import type { LocaleData, WebShellLocale } from \"@nike/web-shell-types\";\nimport { DEFAULT_LOCALE_DATA } from \"@nike/web-shell-shared\";\n\nexport class DotcomWebShellLocale implements WebShellLocale {\n  /**\n   * @deprecated Use DEFAULT_LOCALE_DATA from \"@nike/web-shell-shared\" instead\n   */\n  static defaultLocale: LocaleData = DEFAULT_LOCALE_DATA;\n\n  private readonly current: LocaleData;\n\n  /**\n   * Tracks whether or not analytics initialization has been tracked in New Relic\n   */\n  private hasTrackedInit = false;\n\n  constructor(initialLocale: LocaleData = DEFAULT_LOCALE_DATA) {\n    this.current = initialLocale;\n  }\n\n  get = (): LocaleData => {\n    if (typeof window === `undefined`) {\n      // This was called somewhere besides the browser.\n      // This method isn't supported on the server or in a worker, but we don't want to break\n      // users' applications if they rely on code that calls this method.\n\n      // eslint-disable-next-line no-console\n      console.warn(\n        [\n          `Warning! shell.locale.get() is only meant to be used on the client. We don't know what the current locale is on the server without extra info.`,\n          `Use parseRequestLocale from @nike/web-shell-server-utils to get the locale server-side.`,\n          `If you need the locale server-side in React, pass it to the LocaleProvider via the locale prop.`\n        ].join(`\\n\\n`)\n      );\n    } else if (!this.hasTrackedInit) {\n      window.newrelic?.addPageAction(`WEB_SHELL_CLIENT_LOCALE_INITIALIZED`, {\n        webShellClientVersion: process.env.WEB_SHELL_CLIENT_VERSION ?? ``\n      });\n\n      this.hasTrackedInit = true;\n    }\n\n    return this.current;\n  };\n}\n","import type { ModalManager as ModalManagerInterface } from \"@nike/web-shell-types\";\n\nexport const defaultModalRoot = `#modal-root`;\n\nexport class ModalManager implements ModalManagerInterface {\n  public activeModalID: string | null;\n  public refEl: HTMLElement | null;\n  public rootSelector: string;\n\n  constructor(rootSelector: string = defaultModalRoot) {\n    this.rootSelector = rootSelector;\n    this.activeModalID = null;\n  }\n\n  setActiveModalID: ModalManagerInterface[\"setActiveModalID\"] = (id) => {\n    this.activeModalID = id;\n  };\n\n  setReferringElement: ModalManagerInterface[\"setReferringElement\"] = (refEl) => {\n    this.refEl = refEl;\n  };\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  closeVanilla: ModalManagerInterface[\"closeVanilla\"] = (): void => {};\n}\n","/* eslint-disable no-console */\nimport type {\n  WebShellWindow,\n  ReactInstanceFactory as ReactInstanceFactoryInterface,\n  RemoteComponentsName,\n  PreFetchDependencies\n} from \"@nike/web-shell-types\";\nimport {\n  VENDOR_SCRIPT_REACT_URL,\n  VENDOR_SCRIPT_REACT_DOM_URL,\n  PRE_FETCH_DEPENDENCIES,\n  REMOTE_COMPONENTS_URL\n} from \"@nike/web-shell-shared\";\n\nconst { REACT, REACT_DOM, REMOTE } = PRE_FETCH_DEPENDENCIES;\n\ntype LoadReactOrReactDOM = Extract<PreFetchDependencies, \"React\" | \"ReactDOM\">;\n\nexport type ReactInstanceConfigsType = {\n  [key in PreFetchDependencies]: {\n    isDefined: boolean;\n    fetchPromise: null | Promise<void>;\n  };\n};\n\nexport class ReactInstanceFactory implements ReactInstanceFactoryInterface {\n  static _instance: ReactInstanceFactory | undefined;\n\n  private readonly _window: WebShellWindow;\n\n  private configs: ReactInstanceConfigsType = {\n    [REACT]: {\n      fetchPromise: null,\n      isDefined: false\n    },\n    [REACT_DOM]: {\n      fetchPromise: null,\n      isDefined: false\n    },\n    [REMOTE]: {\n      fetchPromise: null,\n      isDefined: false\n    }\n  };\n\n  constructor(globalWindow: WebShellWindow) {\n    if (ReactInstanceFactory._instance) {\n      // eslint-disable-next-line no-constructor-return\n      return ReactInstanceFactory._instance;\n    }\n\n    this._window = globalWindow;\n    this._window._remoteComponents = {};\n    this.configs[REACT].isDefined = this.isExistOnWindow(REACT);\n    this.configs[REACT_DOM].isDefined = this.isExistOnWindow(REACT_DOM);\n    ReactInstanceFactory._instance = this;\n  }\n\n  private isExistOnWindow(dependency: string): boolean {\n    return dependency in this._window;\n  }\n\n  private loadReactOrReactDOMHandleSuccess(key: LoadReactOrReactDOM): void {\n    this.configs[key]!.isDefined = true;\n    this.configs[key]!.fetchPromise = null;\n  }\n\n  private loadReactOrReactDOMHandleFailure(key: LoadReactOrReactDOM, error: Error): void {\n    this.configs[key]!.isDefined = false;\n    this.configs[key]!.fetchPromise = null;\n    console.error(error);\n  }\n\n  private async loadReactOrReactDOM(key: LoadReactOrReactDOM): Promise<void> {\n    // If React || ReactDOM is loading right now we will return that promise and won't create a new one\n    if (this.configs[key]!.fetchPromise) {\n      return this.configs[key]!.fetchPromise!;\n    }\n\n    const promise = new Promise((resolve, reject) => {\n      const vendorScriptURL = key === REACT ? VENDOR_SCRIPT_REACT_URL : VENDOR_SCRIPT_REACT_DOM_URL;\n      const script = document.createElement(`script`);\n      script.src = vendorScriptURL;\n      script.id = key;\n      document.body.appendChild(script);\n      script.onload = resolve;\n      script.onerror = reject;\n    })\n      // eslint-disable-next-line promise/prefer-await-to-then\n      .then(() => this.loadReactOrReactDOMHandleSuccess(key))\n      // eslint-disable-next-line promise/prefer-await-to-callbacks\n      .catch((error) => this.loadReactOrReactDOMHandleFailure(key, error));\n\n    this.configs[key]!.fetchPromise = promise;\n    return promise;\n  }\n\n  private async loadRemote(): Promise<void> {\n    // If Remote is loading right now we will return that promise and won't create a new one\n    if (this.configs[REMOTE].fetchPromise) {\n      return this.configs[REMOTE].fetchPromise!;\n    }\n\n    const promise = import(`@nike/remote-component`)\n      // eslint-disable-next-line promise/prefer-await-to-then,promise/always-return\n      .then((response) => {\n        this._window._remoteModule = response.RemoteComponent;\n        this.configs[REMOTE].isDefined = true;\n        this.configs[REMOTE].fetchPromise = null;\n      })\n      // eslint-disable-next-line promise/prefer-await-to-callbacks\n      .catch((error) => {\n        this.configs[REMOTE].isDefined = false;\n        this.configs[REMOTE].fetchPromise = null;\n        console.error(error);\n      });\n\n    this.configs[REMOTE].fetchPromise = promise;\n    return promise;\n  }\n\n  private renderComponentInDom(component: any, renderIntoId: string): void {\n    const appendToComponent = document.getElementById(renderIntoId);\n\n    if (!appendToComponent) {\n      throw new Error(`Can not find target element`);\n    }\n\n    const customWrapperId = `_${renderIntoId}-wrapper`;\n    const customWrapperOnDOM = document.getElementById(customWrapperId);\n\n    if (!customWrapperOnDOM) {\n      const customWrapper = document.createElement(`div`);\n      customWrapper.id = customWrapperId;\n      appendToComponent.appendChild(customWrapper);\n    }\n\n    this._window[REACT_DOM]!.render(component, document.getElementById(customWrapperId));\n  }\n\n  private getNotExistDependencies(dependencies: string[]): string[] {\n    return dependencies.reduce((acc, key) => {\n      const dependencyConfigs = this.configs[key];\n\n      if (dependencyConfigs.isDefined) {\n        return acc;\n      }\n\n      return [...acc, key];\n    }, []);\n  }\n\n  private async fetchDependencies(dependencies: PreFetchDependencies[]): Promise<void> {\n    // for React and ReactDOM it does not matter in which order we will fetch those libs\n    // But Remote component should be fetched only after React & ReactDOM, because that component requires theme\n    let remotePromise: undefined | Function;\n\n    const promises: Promise<void>[] = dependencies.reduce((acc, key) => {\n      if (key === REMOTE) {\n        remotePromise = this.loadRemote.bind(this);\n        return acc;\n      }\n\n      return [...acc, this.loadReactOrReactDOM(key)];\n    }, []);\n    await Promise.allSettled(promises);\n\n    if (remotePromise) {\n      await remotePromise.apply(this);\n    }\n  }\n\n  private async configureDependenciesBeforeRender(dependencies: string[]): Promise<void> {\n    const notExistDependencies = this.getNotExistDependencies(dependencies);\n\n    if (!notExistDependencies.length) return;\n\n    await this.fetchDependencies(notExistDependencies as PreFetchDependencies[]);\n  }\n\n  private validateDependencies(dependencies: string[]): void {\n    const oneOfDependenciesNotExist = dependencies.find(\n      (dependency) => !this.configs[dependency].isDefined\n    );\n\n    if (oneOfDependenciesNotExist) {\n      throw new Error(`\"${oneOfDependenciesNotExist}\" is not initialized`);\n    }\n  }\n\n  private checkIsValidReactElement<C extends {} | null | undefined>(component: C): void {\n    const isValid = this._window[REACT]?.isValidElement(component);\n\n    if (!isValid) {\n      throw new Error(`Is not a React component`);\n    }\n  }\n\n  private getDependenciesForPrefetch(dependencies: string[]): string[] {\n    const dependenciesWithoutNotAllowed = dependencies.reduce((acc, dependency) => {\n      const dependencyConfigs = this.configs[dependency];\n\n      if (!dependencyConfigs) {\n        console.error(`\"${dependency}\" does not exist in possible dependencies`);\n        return acc;\n      }\n\n      return [...acc, dependency];\n    }, []);\n    const dependenciesExtended = [...dependenciesWithoutNotAllowed];\n    const isContainRemoteDependency = dependenciesExtended.includes(REMOTE);\n\n    // We need to have this conditions, because Remote component require React & ReactDOM during fetching it\n    if (isContainRemoteDependency && !dependencies.includes(REACT)) {\n      dependenciesExtended.push(REACT);\n    }\n    if (isContainRemoteDependency && !dependencies.includes(REACT_DOM)) {\n      dependenciesExtended.push(REACT_DOM);\n    }\n\n    return dependenciesExtended;\n  }\n\n  private getRemoteComponentByName(remoteComponentName: RemoteComponentsName): any {\n    if (remoteComponentName in this._window._remoteComponents!) {\n      return this._window._remoteComponents![remoteComponentName];\n    }\n\n    const ComponentCustom = this._window[REACT]?.createElement(this._window._remoteModule, {\n      endpoint: REMOTE_COMPONENTS_URL[remoteComponentName],\n      prefetch: false\n    });\n    this._window._remoteComponents![remoteComponentName] = ComponentCustom;\n    return ComponentCustom;\n  }\n\n  prefetchDependencies: ReactInstanceFactoryInterface[\"prefetchDependencies\"] = async (\n    dependencies\n  ) => {\n    const dependenciesExtended = this.getDependenciesForPrefetch(dependencies);\n    const notExistDependencies = this.getNotExistDependencies(dependenciesExtended);\n\n    if (!notExistDependencies.length) return;\n\n    await this.fetchDependencies(notExistDependencies as PreFetchDependencies[]);\n  };\n\n  renderRemoteComponent: ReactInstanceFactoryInterface[\"renderRemoteComponent\"] = async (\n    remoteComponentName,\n    renderIntoId\n  ) => {\n    const dependencies = [REACT, REACT_DOM, REMOTE];\n    await this.configureDependenciesBeforeRender(dependencies);\n\n    this.validateDependencies(dependencies);\n    const component = this.getRemoteComponentByName(remoteComponentName);\n    this.checkIsValidReactElement(component);\n\n    this.renderComponentInDom(component, renderIntoId);\n  };\n\n  render: ReactInstanceFactoryInterface[\"render\"] = async (component, renderIntoId) => {\n    const dependencies = [REACT, REACT_DOM];\n    await this.configureDependenciesBeforeRender(dependencies);\n\n    this.validateDependencies(dependencies);\n    this.checkIsValidReactElement(component);\n\n    this.renderComponentInDom(component, renderIntoId);\n  };\n}\n","import Cookies from \"js-cookie\";\nimport type {\n  UserLocationData,\n  WebShellUserLocation,\n  UserLocationKeys\n} from \"@nike/web-shell-types\";\nimport { DEFAULT_USER_LOCATION_DATA } from \"@nike/web-shell-shared\";\n\nexport const GEOLOC_COOKIE_NAME = `geoloc`;\nconst geolocKeysMap: Record<string, UserLocationKeys> = {\n  cc: `country`,\n  rc: `state`,\n  la: `latitude`,\n  lo: `longitude`\n};\n\nexport class DotcomWebShellUserLocation implements WebShellUserLocation {\n  current: UserLocationData;\n\n  /**\n   * @deprecated Use DEFAULT_USER_LOCATION_DATA from \"@nike/web-shell-types\" instead\n   */\n  static defaultUserLocation: UserLocationData = { ...DEFAULT_USER_LOCATION_DATA };\n\n  constructor() {\n    this.current = this.readCookie();\n  }\n\n  readCookie = (): UserLocationData => {\n    const userLocation: UserLocationData = {\n      ...DEFAULT_USER_LOCATION_DATA\n    };\n    if (typeof document === `undefined`) {\n      return userLocation;\n    }\n    const userData =\n      Cookies.get(GEOLOC_COOKIE_NAME)\n        ?.split(`,`)\n        .reduce((result, keyValue) => {\n          const [key, value] = keyValue.split(`=`);\n          result[key] = value;\n          return result;\n        }, {}) ?? {};\n    for (const [key, value] of Object.entries(geolocKeysMap)) {\n      userLocation[value] = userData[key] ?? ``;\n    }\n    return userLocation;\n  };\n\n  get = (): UserLocationData => this.current;\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./analytics\"), exports);\n__exportStar(require(\"./ModalManager\"), exports);\n__exportStar(require(\"./PreFetchDependencies\"), exports);\n__exportStar(require(\"./ReactInstanceFactory\"), exports);\n__exportStar(require(\"./RemoteComponentsName\"), exports);\n__exportStar(require(\"./UniteCredential\"), exports);\n__exportStar(require(\"./WebShellClient\"), exports);\n__exportStar(require(\"./WebShellIdentity\"), exports);\n__exportStar(require(\"./WebShellInternal\"), exports);\n__exportStar(require(\"./WebShellLocale\"), exports);\n__exportStar(require(\"./WebShellOptimization\"), exports);\n__exportStar(require(\"./WebShellTranslations\"), exports);\n__exportStar(require(\"./WebShellUserLocation\"), exports);\n//# sourceMappingURL=index.js.map","import type {\n  BodaciousTranslations,\n  TranslationsCollection,\n  WebShellLocale,\n  WebShellTranslations\n} from '@nike/web-shell-types';\n\nexport class DotcomWebShellTranslations implements WebShellTranslations {\n  private locale: WebShellLocale;\n\n  private hasTrackedInit = false;\n\n  constructor(locale: WebShellLocale) {\n    this.locale = locale;\n    this.formatMessage.bind(this);\n  }\n\n  /**\n   * Downloads translations from corresponding location in S3 for bodacious.\n   * Do not re-download if the translations for the given namespace have already been fetched\n   */\n  fetch: WebShellTranslations['fetch'] = async (\n    namespaces,\n    options = {}\n  ): Promise<TranslationsCollection> => {\n    if (!this.hasTrackedInit && typeof window !== `undefined`) {\n      window.newrelic?.addPageAction(`WEB_SHELL_CLIENT_TRANSLATIONS_INITIALIZED`, {\n        webShellClientVersion: process.env.WEB_SHELL_CLIENT_VERSION ?? ``\n      });\n\n      this.hasTrackedInit = true;\n    }\n\n    const getURL = (namespace: string): string =>\n      `${String(\n        options.urlBase ?? `https://${process.env.NEXT_PUBLIC_HOST_NAME}/assets/i18n`\n      )}/${namespace}/${String(this.locale.get().hreflang)}.json`;\n\n    try {\n      // Fetch all of the translations in parallel\n      const results = await Promise.all(\n        namespaces.map(async (namespace) => fetch(getURL(namespace)))\n      );\n      // Then extract the json data from each fetch response\n      const jsonArr = await Promise.all<BodaciousTranslations>(\n        results.map(async (result) => {\n          const json = await result.json();\n          return json;\n        })\n      );\n\n      // Finally combine each namespace into a single object\n      const translationsByNamespace = jsonArr.reduce<TranslationsCollection>(\n        (allTranslations: TranslationsCollection, translation, index) =>\n          Object.assign(allTranslations, { [namespaces[index]]: translation }),\n        {}\n      );\n\n      return translationsByNamespace;\n    } catch (err: unknown) {\n      // eslint-disable-next-line no-console\n      console.error(`Failed to fetch Translations`, err);\n      // If we fail to fetch the translations or we receive malformed data,\n      // return an empty object so that we default back to English\n      return {};\n    }\n  };\n\n  // NOTE: In order for formatMessage to work properly in this context, we have to use\n  // a method declaration in this manner for it to receive the correct arguments\n  // otherwise the result becomes undefined\n  //\n  // Perhaps this can be re-written in such a way that we're not repeating type information,\n  // but we would have to solve for the `this` context not being bound correctly\n  //\n  // Check out translations.test.tsx in web-shell-client-react if you attempt to change this\n  // implementation, as those tests are the most likely thing to break as a result\n  formatMessage(messageValue: string, params: Record<string, string> = {}): string {\n    // We do not want to use named capture groups in client-side code while Microsoft Edge is still supported\n    // eslint-disable-next-line prefer-named-capture-group\n    return messageValue.replace(/\\{(.*?)\\}/gu, (_, token) => params[token]);\n  }\n}\n","import type {\n  AnalyticsCallback,\n  TrackOptions,\n  WebShellAnalytics,\n  WebShellAnalyticsContext,\n  WebShellAnalyticsEvent,\n  WebShellAnalyticsOptions\n} from \"@nike/web-shell-types\";\n\nexport const TEST_SEGMENT_WRITE_KEY = `POwa4r8vBBSw7xdQZ0dqGlNuyaT7Y7pZ`;\n\nexport const defaultAnalyticsOptions: WebShellAnalyticsOptions = {\n  writeKey: TEST_SEGMENT_WRITE_KEY\n};\n\nexport function dotcomNoopAnalyticsFactory(): WebShellAnalytics {\n  const context = {};\n\n  function getContext(): WebShellAnalyticsContext {\n    const errorMessage = `Web Shell Client Analytics: analytics.getContext() called but no analytics client is configured.  Please supply window.analyticsClient to use Web Shell's analytics feature`;\n\n    /* eslint-disable no-console */\n    console.warn(errorMessage);\n    /* eslint-enable */\n\n    if (window.newrelic?.noticeError) {\n      window.newrelic.noticeError(errorMessage);\n    }\n\n    return context;\n  }\n\n  function load(writeKey: string): void {\n    const errorMessage = `Web Shell Client Analytics: analytics.load() called but no analytics client is configured.  Please supply window.analyticsClient to use Web Shell's analytics feature`;\n\n    /* eslint-disable no-console */\n    console.warn(errorMessage);\n    console.log(`.load() called with write key: ${writeKey}`);\n    /* eslint-enable */\n\n    if (window.newrelic?.noticeError) {\n      window.newrelic.noticeError(errorMessage);\n    }\n  }\n\n  function debug(enable?: false): void {\n    const errorMessage = `Web Shell Client Analytics: analytics.debug() called but no analytics client is configured.  Please supply window.analyticsClient to use Web Shell's analytics feature`;\n\n    /* eslint-disable no-console */\n    console.warn();\n    console.log(`.debug() called with: `, enable);\n    /* eslint-enable */\n\n    if (window.newrelic?.noticeError) {\n      window.newrelic.noticeError(errorMessage);\n    }\n  }\n\n  function track(\n    eventName: unknown,\n    properties: unknown,\n    options?: TrackOptions,\n    callback?: AnalyticsCallback\n  ): void;\n  function track<TProperties, TEvent extends WebShellAnalyticsEvent<TProperties>>(\n    event: TEvent /*extends WebShellAnalyticsEvent<infer U> ? U : never*/\n  ): void;\n  // eslint-disable-next-line promise/prefer-await-to-callbacks\n  function track(eventName: any, properties?: any, options?: any, callback?: any): void {\n    const errorMessage = `Web Shell Client Analytics: analytics.track() called but no analytics client is configured.  Please supply window.analyticsClient to use Web Shell's analytics feature`;\n\n    /* eslint-disable no-console */\n    console.warn(errorMessage);\n    console.log(`.track() called with: `, eventName, properties, options, callback);\n    /* eslint-enable */\n\n    if (window.newrelic?.noticeError) {\n      window.newrelic.noticeError(errorMessage);\n    }\n  }\n\n  function page<TPageEventProperties>(\n    pageCategory: unknown,\n    pageName: unknown,\n    properties: TPageEventProperties,\n    options?: TrackOptions,\n    callback?: AnalyticsCallback\n  ): void;\n\n  function page<TEvent>(event: TEvent): void;\n\n  // eslint-disable-next-line promise/prefer-await-to-callbacks\n  function page(\n    pageCategory: any,\n    pageName?: any,\n    properties?: any,\n    options?: any,\n    // eslint-disable-next-line promise/prefer-await-to-callbacks\n    callback?: any\n  ): void {\n    const errorMessage = `Web Shell Client Analytics: analytics.page() called but no analytics client is configured.  Please supply window.analyticsClient to use Web Shell's analytics feature`;\n\n    /* eslint-disable no-console */\n    console.warn(errorMessage);\n    console.log(`.page() called with: `, pageCategory, pageName, properties, options, callback);\n    /* eslint-enable */\n\n    if (window.newrelic?.noticeError) {\n      window.newrelic.noticeError(errorMessage);\n    }\n  }\n  return {\n    getContext,\n    load,\n    debug,\n    track,\n    page\n  };\n}\n\nexport function dotcomWebShellAnalyticsFactory(\n  analyticsOptions: WebShellAnalyticsOptions\n): WebShellAnalytics {\n  /**\n   * Tracks whether or not analytics initialization has been tracked in New Relic\n   */\n  let hasTrackedInit = false;\n\n  const finalOptions = { ...defaultAnalyticsOptions, ...analyticsOptions };\n\n  /*\n   *  If writeKey isn't configured, set writeKey to the value of segmentWriteKey if it's present.\n   *  TODO: Remove this functionality as a breaking change in https://jira.nike.com/browse/TG-4862\n   */\n\n  if (analyticsOptions.segmentWriteKey) {\n    if (!analyticsOptions.writeKey) {\n      finalOptions.writeKey = analyticsOptions.segmentWriteKey;\n    }\n\n    delete finalOptions.segmentWriteKey;\n  }\n\n  const context = {};\n\n  /**\n   * Calls window.analyticsClient.load() and sets the segment write key to use for all\n   * .page() and .track() calls\n   * @param writeKey - The write key to use on all .page() and .track()\n   * calls. NOTE: If supplied, this will override the value passed in the analyticsOptions argument\n   * of the factory\n   */\n  function load(writeKey?: string): void {\n    if (writeKey) {\n      finalOptions.writeKey = writeKey;\n    }\n    window.analyticsClient.load();\n\n    if (!hasTrackedInit) {\n      window.newrelic?.addPageAction(`WEB_SHELL_CLIENT_ANALYTICS_INITIALIZED`, {\n        webShellClientVersion: process.env.WEB_SHELL_CLIENT_VERSION ?? ``\n      });\n      hasTrackedInit = true;\n    }\n  }\n\n  // TODO: Proper typing of entire context object is needed for IDE Validation\n  function getContext(): WebShellAnalyticsContext {\n    return context;\n  }\n\n  // TODO: setViewProperties, setAppProperties, setCommonProperties to update parts of the context\n\n  function debug(enable?: false): void | Error {\n    window.analyticsClient.debug(enable);\n  }\n\n  /**\n   * Aligns with analytics.track() function.  Consumes new data, and uses propertyReplacer\n   * to replace variables with values from context before submission.\n   * @param eventName Name of analytics event\n   * @param properties Additional properties required for the event\n   * @param options Any additional track options\n   */\n  function track(eventName: unknown, properties: unknown, options?: TrackOptions): void;\n  function track<TEvent>(event: TEvent extends WebShellAnalyticsEvent<infer U> ? U : never): void;\n  function track(\n    eventNameOrEvent: any,\n    maybeProperties?: any,\n    maybeOptions?: any,\n    maybeCallback?: any\n  ): void {\n    let options = finalOptions;\n\n    if (maybeOptions && typeof maybeOptions === `object`) {\n      options = {\n        ...options,\n        ...maybeOptions\n      };\n    }\n\n    // For now, just pass straight through to window.analyticsClient.\n    // TODO: Update these properties with the values in the context\n    window.analyticsClient.track(eventNameOrEvent, maybeProperties, options, maybeCallback);\n  }\n\n  /**\n   * Aligns with analytics.page() function. Adds writeKey if not present.\n   * @param pageCategory\n   * @param pageName\n   * @param properties\n   * @param options\n   */\n  function page<TPageEventProperties>(\n    pageCategory: unknown,\n    pageName: unknown,\n    properties: TPageEventProperties,\n    options?: TrackOptions\n  ): void;\n  function page<TEvent>(event: TEvent): void;\n  function page(\n    pageCategoryOrEvent: unknown,\n    maybePageName?: string,\n    maybeProperties?: any,\n    maybeOptions?: any\n  ): void {\n    let options = finalOptions;\n\n    if (maybeOptions && typeof maybeOptions === `object`) {\n      options = {\n        ...options,\n        ...maybeOptions\n      };\n    }\n\n    // For now, just pass straight through to window.analyticsClient.\n    // TODO: Update these properties with the values in the context\n    window.analyticsClient.page(pageCategoryOrEvent, maybePageName, maybeProperties, options);\n  }\n\n  return {\n    getContext,\n    load,\n    debug,\n    track,\n    page\n  };\n}\n","// Countries that should be bucketed to Accounts\nexport const accountsCountries = [`cn`, `kr`];\n// Countries that should be bucketed to Unite\nexport const uniteCountries = [\n  `ae`,\n  `au`,\n  `bg`,\n  `br`,\n  `ca`,\n  `ch`,\n  `hr`,\n  `id`,\n  `il`,\n  `in`,\n  `mx`,\n  `my`,\n  `no`,\n  `nz`,\n  `ph`,\n  `ro`,\n  `ru`,\n  `sa`,\n  `sg`,\n  `sk`,\n  `th`,\n  `tr`,\n  `tw`,\n  `vn`,\n  `za`\n];\n","/**\n * The info associated with this file is intended to be accessed in the console for debugging, testing, and developing.\n * It is NOT intended to be coded against.\n */\n\nimport type { WebShellClientInfo } from \"@nike/web-shell-types\";\nimport { DEFAULT_WEB_SHELL_CLIENT_INFO } from \"@nike/web-shell-shared\";\n\n// should never be exported, mutate with functions. get with getWebShellClientInfo\nlet webShellClientInfo: WebShellClientInfo = {\n  ...DEFAULT_WEB_SHELL_CLIENT_INFO\n};\n\nexport const getWebShellClientInfo = (): WebShellClientInfo => webShellClientInfo;\n\n/**\n * Functions that reassign to webShellClientInfo\n */\nfunction reset(): void {\n  webShellClientInfo = { ...DEFAULT_WEB_SHELL_CLIENT_INFO };\n}\n\nfunction initializeIdentity(userManager: `accounts` | `unite`): void {\n  webShellClientInfo = {\n    ...webShellClientInfo,\n    identityProvider: userManager\n  };\n}\n\nexport const webShellClientInfoDispatch = {\n  reset,\n  initializeIdentity\n};\n","import type {\n  WebShellNewRelicPageActionName,\n  WebShellNewRelicPageActionAttributes\n} from \"@nike/web-shell-types/dist/analytics/NewRelicPageAction\";\n\ninterface ProcessedNewRelicPageActionAttributes {\n  [index: string]: string | number;\n}\n\nconst removeUndefinedProperties = (attributes: {}): ProcessedNewRelicPageActionAttributes => {\n  const stringifiedAttributes = JSON.stringify(attributes);\n\n  return JSON.parse(stringifiedAttributes);\n};\n\nexport const addPageAction = (\n  pageActionName: WebShellNewRelicPageActionName,\n  attributes: WebShellNewRelicPageActionAttributes | {} = {}\n): void => {\n  if (typeof window !== `undefined`) {\n    const attributesWithVersion = {\n      ...attributes,\n      webShellClientVersion: window.webShellClient.__VERSION__ ?? ``\n    };\n\n    const processedAttributes = removeUndefinedProperties(attributesWithVersion);\n\n    window.newrelic?.addPageAction(pageActionName, processedAttributes);\n  }\n};\n","import Cookies from \"js-cookie\";\nimport type {\n  IdentityProviderReason,\n  InitializationSettings,\n  UserProfile,\n  WebShellIdentity,\n  WebShellLocale\n} from \"@nike/web-shell-types\";\nimport type {\n  User,\n  Profile,\n  UserManager as UserManagerType,\n  WebStorageStateStore as WebStorageStateStoreType\n} from \"@nike/oidc-client\";\nimport type { UniteManager as UniteManagerType } from \"./UniteUserManager\";\nimport { removeVisitData } from \"./storage\";\nimport { getVisitData as sharedGetVisitData } from \"./shared\";\nimport { accountsCountries, uniteCountries } from \"./identityConfig\";\nimport { webShellClientInfoDispatch } from \"../internal/webShellClientInfo\";\nimport { addPageAction } from \"../newRelicUtils\";\n\nconst isSwooshUser = (\n  profile: Partial<{ userType?: string; swoosh?: boolean }> | undefined\n): boolean => {\n  if (profile?.userType === `EMPLOYEE` || profile?.swoosh) {\n    return true;\n  }\n  return false;\n};\n\n// input data is either user.profile from oid userManager's .getUser or profile object from success callback of session.getUserProfile\nconst shapeUserProfile = (data: any): UserProfile => {\n  const profile: UserProfile = {\n    avatarUrl:\n      data?.picture || data?.avatar_url || data?.entity?.avatar?.fullUrl || data?.avatarUrl,\n    firstName: data?.given_name || data?.entity?.firstName || data?.firstName,\n    altFirstName:\n      data?.name?.kana?.given ||\n      data?.name?.alternate?.given ||\n      data?.entity?.jpFirstNameKana ||\n      data?.altFirstName,\n    altLastName:\n      data?.name?.kana?.family ||\n      data?.name?.alternate?.family ||\n      data?.entity?.jpLastNameKana ||\n      data?.altLastName,\n    lastName: data?.family_name || data?.entity?.lastName || data?.lastName,\n    email: data?.email || data?.entity?.account?.email,\n    mobileNumber: data?.phone_number || data?.entity?.mobileNumber || data?.mobileNumber,\n    upmId: data?.sub || data?.entity?.account?.id || data?.upmId,\n    registeredCountry: data?.country,\n    signInFlow: data?.flow,\n    userType: `GUEST`\n  };\n  if (isSwooshUser(data)) {\n    profile.userType = `SWOOSH`;\n  } else if (profile.upmId) {\n    profile.userType = `MEMBER`;\n  }\n  return profile;\n};\n\n///////////////////////////////\n// OidcClient config\n///////////////////////////////\n// Oidc.Log.logger = console;\n// Oidc.Log.level = Oidc.Log.INFO;\n\nconst callBackRouteRegex = /^(?:\\/auth\\/(?:login|logout|silent-renew))|^(?:\\/(?:[a-z]{2}\\/(?:[a-z]{2}(?:-[A-z]{4})?\\/)?)?(?:login|register))/;\nconst isNotACallbackRoute = (): boolean =>\n  callBackRouteRegex.exec(window.location.pathname) === null;\nfunction createOIDCSettings(userStore: WebStorageStateStoreType): Object {\n  return {\n    authority: process.env.NEXT_PUBLIC_AUTHORITY,\n    client_id: process.env.NEXT_PUBLIC_CLIENT_ID,\n    redirect_uri: process.env.NEXT_PUBLIC_REDIRECT_URI ?? `${window.location.origin}/auth/login`,\n    post_logout_redirect_uri:\n      process.env.NEXT_PUBLIC_POST_LOGOUT_REDIRECT_URI ?? `${window.location.origin}/auth/logout`,\n    silent_redirect_uri:\n      process.env.NEXT_PUBLIC_SILENT_REDIRECT_URI ?? `${window.location.origin}/auth/silent-renew`,\n    response_type: `code`,\n    scope: `openid nike.digital profile email phone flow country`,\n    loadUserInfo: false,\n    automaticSilentRenew: true,\n    userStore,\n    monitorSession: isNotACallbackRoute()\n  };\n}\n\n// Helper function to determine unite vs accounts.  Exported for testing, not for external use.\nexport function getIsIdentityProviderUnite(\n  locale: WebShellLocale\n): { isUnite: boolean; reason: IdentityProviderReason } {\n  /**\n   * unite_session and unite_mobile_session are for internal use ONLY and external consumers should not make use of them.\n   */\n  const uniteSessionCookie = Cookies.get(`unite_session`);\n  const uniteMobileSessionCookie = Cookies.get(`unite_mobile_session`);\n  const identityProviderCookie = Cookies.get(`ws_identity_provider`);\n  const localeCountry = locale.get().country;\n\n  if (identityProviderCookie === `accounts`) {\n    return { isUnite: false, reason: `developerCookie` };\n  } else if (identityProviderCookie === `unite`) {\n    return { isUnite: true, reason: `developerCookie` };\n  } else if (uniteSessionCookie === `1` || uniteMobileSessionCookie === `1`) {\n    return { isUnite: true, reason: `uniteSessionCookie` };\n  } else if (accountsCountries.includes(localeCountry)) {\n    return { isUnite: false, reason: `accountsCountry` };\n  } else if (uniteCountries.includes(localeCountry)) {\n    return { isUnite: true, reason: `uniteCountry` };\n  }\n  return { isUnite: false, reason: `fallthrough` };\n}\n\nexport const IS_SIGNED_IN_COOKIE_NAME = `ni_s`;\nconst IS_SIGNED_IN_COOKIE_PARAMS = { domain: `nike.com`, path: `/` };\n\nconst setIsSignedInCookie = (): void => {\n  Cookies.set(IS_SIGNED_IN_COOKIE_NAME, `1`, { ...IS_SIGNED_IN_COOKIE_PARAMS, expires: 365 });\n};\n\nconst removeIsSignedInCookie = (): void => {\n  Cookies.remove(IS_SIGNED_IN_COOKIE_NAME, IS_SIGNED_IN_COOKIE_PARAMS);\n};\n\nexport const hasIsSignedInCookie = (): boolean => Cookies.get(IS_SIGNED_IN_COOKIE_NAME) === `1`;\n\nconst isCrossSubdomainNavigation = (): boolean =>\n  document.referrer.includes(`nike`) && !document.referrer.includes(document.location.origin);\n\nconst shouldSilentlySignIn = (user: User | null | undefined): boolean =>\n  Boolean(\n    ((isCrossSubdomainNavigation() && hasIsSignedInCookie()) || user?.expired) &&\n      isNotACallbackRoute()\n  );\n\ntype UserManager =\n  | { type: null; instance: null }\n  | { type: `unite`; instance: UniteManagerType }\n  | { type: `oidc`; instance: UserManagerType };\n\nexport function makeIdentity({ locale }: InitializationSettings): WebShellIdentity {\n  let internalIsUnite = false;\n\n  const _init = async (): Promise<UserManager> => {\n    let userManager: UserManager = { type: null, instance: null };\n    const webShellClientVersion = process.env.WEB_SHELL_CLIENT_VERSION ?? ``;\n\n    const isClient = typeof window !== `undefined`;\n\n    try {\n      if (isClient) {\n        const { isUnite: isIdentityProviderUnite, reason } = getIsIdentityProviderUnite(locale);\n        internalIsUnite = isIdentityProviderUnite;\n\n        window.newrelic?.addPageAction(`WEB_SHELL_CLIENT_IDENTITY_INITIALIZED`, {\n          isUnite: internalIsUnite.toString(),\n          reason,\n          webShellClientVersion\n        });\n\n        if (internalIsUnite) {\n          const { UniteManager } = await import(`./UniteUserManager`);\n          userManager = { type: `unite`, instance: new UniteManager() };\n        } else {\n          // dynamically import oidc client\n          const { UserManager, WebStorageStateStore } = await import(`@nike/oidc-client`);\n          const userStore = new WebStorageStateStore({ store: window.localStorage });\n          const OIDCSettings = createOIDCSettings(userStore);\n          userManager = { type: `oidc`, instance: new UserManager(OIDCSettings) };\n          // removed accounts visitData implementation (PR: https://github.com/nike-internal/dotcom.web-shell/pull/576)\n          // use silent-renew feature if appropriate\n          const user = await userManager.instance.getUser();\n          if (shouldSilentlySignIn(user)) {\n            await userManager.instance.signinSilent();\n          }\n        }\n      }\n\n      webShellClientInfoDispatch.initializeIdentity(internalIsUnite ? `unite` : `accounts`);\n    } catch {\n      window.newrelic?.addPageAction(`WEB_SHELL_CLIENT_IDENTITY_INITIALIZE_ERROR`, {\n        isUnite: internalIsUnite.toString(),\n        webShellClientVersion\n      });\n    }\n\n    return userManager;\n  };\n\n  const userManagerPromise = _init();\n\n  /**\n   * This function is only used by the OIDC callback route\n   * and should NOT be used directly\n   */\n  const processSignIn: WebShellIdentity[`processSignIn`] = async () => {\n    try {\n      const userManager = await userManagerPromise;\n      const user = await userManager.instance?.signinCallback();\n      setIsSignedInCookie();\n      return user;\n    } catch (e: unknown) {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_PROCESS_SIGN_IN_ERROR`, {\n        isUnite: internalIsUnite.toString()\n      });\n      throw e;\n    }\n  };\n\n  const processSignOut: WebShellIdentity[`processSignOut`] = async () => {\n    try {\n      const userManager = await userManagerPromise;\n      const response = await userManager.instance?.signoutCallback();\n      removeVisitData();\n      return response;\n    } catch (e: unknown) {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_PROCESS_SIGN_OUT_ERROR`, {\n        isUnite: internalIsUnite.toString()\n      });\n      throw e;\n    }\n  };\n\n  const getUser: WebShellIdentity[`getUser`] = async () => {\n    const userManager = await userManagerPromise;\n    const user = await userManager.instance?.getUser();\n    return user;\n  };\n\n  const getUserProfile: WebShellIdentity[`getUserProfile`] = async () => {\n    try {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_GET_USER_PROFILE`, {\n        isUnite: internalIsUnite.toString()\n      });\n      const user = await getUser();\n      if (user) {\n        return shapeUserProfile(user.profile);\n      }\n    } catch (e: unknown) {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_GET_USER_PROFILE_ERROR`, {\n        isUnite: internalIsUnite.toString()\n      });\n      throw e;\n    }\n  };\n\n  const getIsMobileVerified: WebShellIdentity[`getIsMobileVerified`] = async () => {\n    try {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_GET_IS_MOBILE_VERIFIED`, {\n        isUnite: internalIsUnite.toString()\n      });\n      const userManager = await userManagerPromise;\n      if (userManager.type === `unite`) {\n        const isMobileVerified = await userManager.instance.getUserState(`isMobileVerified`);\n        return isMobileVerified === true;\n      }\n\n      const user = await getUser();\n      return (user?.profile as Profile | undefined)?.phone_number_verified === true;\n    } catch (e: unknown) {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_GET_IS_MOBILE_VERIFIED_ERROR`, {\n        isUnite: internalIsUnite.toString()\n      });\n      throw e;\n    }\n  };\n\n  const getIsSwooshUser: WebShellIdentity[`getIsSwooshUser`] = async () => {\n    try {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_GET_IS_SWOOSH_USER`, {\n        isUnite: internalIsUnite.toString()\n      });\n      const user: { profile?: Object } | null | undefined = await getUser();\n      return isSwooshUser(user?.profile);\n    } catch (e: unknown) {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_GET_IS_SWOOSH_USER_ERROR`, {\n        isUnite: internalIsUnite.toString()\n      });\n      throw e;\n    }\n  };\n\n  const getVisitData: WebShellIdentity[`getVisitData`] = async () => {\n    const userManager = await userManagerPromise;\n    try {\n      if (userManager.type === `unite`) {\n        // Only the Unite User Manager knows about Visit data\n        return await userManager.instance.getVisitData();\n      }\n\n      // Temporary solution to use Unite's getVisitData solution\n      // Previous implementation (PR: https://github.com/nike-internal/dotcom.web-shell/pull/576)\n      const visitData = await sharedGetVisitData();\n      return visitData;\n    } catch (e: unknown) {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_GET_VISIT_DATA_ERROR`, {\n        isUnite: internalIsUnite.toString()\n      });\n      throw e;\n    }\n  };\n\n  const signIn: WebShellIdentity[`signIn`] = async (args = {}) => {\n    const userManager = await userManagerPromise;\n    try {\n      const currentUrl = window.location.href;\n      const state = {\n        ...args,\n        redirectUrl: currentUrl\n      };\n      return userManager.instance?.signinRedirect({ ...args, state });\n    } catch (e: unknown) {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_SIGN_IN_ERROR`, {\n        isUnite: internalIsUnite.toString()\n      });\n      throw e;\n    }\n  };\n\n  const signOut: WebShellIdentity[`signOut`] = async (args = {}) => {\n    try {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_SIGN_OUT`, {\n        isUnite: internalIsUnite.toString()\n      });\n      const state = {\n        ...args,\n        redirectUrl: window.location.href\n      };\n\n      removeIsSignedInCookie();\n\n      // Manually log out of Unite for Accounts to clear visitData\n      if (!internalIsUnite && window.nike?.unite?.session) {\n        window.nike.unite.session.logout(() => {});\n      }\n\n      const userManager = await userManagerPromise;\n      return userManager.instance?.signoutRedirect({ ...args, state });\n    } catch (e: unknown) {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_SIGN_OUT_ERROR`, {\n        isUnite: internalIsUnite.toString()\n      });\n      throw e;\n    }\n  };\n\n  const getIsLoggedIn: WebShellIdentity[`getIsLoggedIn`] = async () => {\n    const profile = await getUserProfile();\n\n    if (profile) {\n      return profile.userType !== `GUEST`;\n    }\n\n    return !!profile;\n  };\n\n  /**\n   * interface function should allow returning access token to mirror unite's existing functionality today\n   * @returns {Promise<string|undefined>} access token if it exists\n   */\n  const getAccessToken: WebShellIdentity[`getAccessToken`] = async () => {\n    try {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_GET_ACCESS_TOKEN`, {\n        isUnite: internalIsUnite.toString()\n      });\n\n      // Must ensure that silent-renew is finished before getting token.\n\n      const user = await getUser();\n\n      if (user) {\n        return user.access_token;\n      }\n    } catch (e: unknown) {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_GET_ACCESS_TOKEN_ERROR`, {\n        isUnite: internalIsUnite.toString()\n      });\n      throw e;\n    }\n  };\n\n  const getInitialized: WebShellIdentity[`getInitialized`] = async () => {\n    try {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_GET_INITIALIZED`, {\n        isUnite: internalIsUnite.toString()\n      });\n      const userManager = await userManagerPromise;\n      if (userManager.type === `unite`) {\n        // unite has an isInitialized property\n        const unite = await userManager.instance.getUnite();\n        return !!unite?.isInitialized;\n      }\n      return !!userManager;\n    } catch (e: unknown) {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_GET_INITIALIZED_ERROR`, {\n        isUnite: internalIsUnite.toString()\n      });\n      throw e;\n    }\n  };\n\n  /**\n   * This function is used ONLY internally by the OIDC callback route\n   * (i.e. www.nike.com/auth/silent-renew) and should NOT be used\n   * directly\n   * @returns\n   */\n  const processReauth: WebShellIdentity[`processReauth`] = async () => {\n    try {\n      const userManager = await userManagerPromise;\n\n      if (userManager.type !== `oidc`) {\n        return;\n      }\n\n      const user = await userManager.instance.signinSilentCallback();\n      if (user) {\n        setIsSignedInCookie();\n      }\n      return user;\n    } catch (e: unknown) {\n      addPageAction(`WEB_SHELL_CLIENT_IDENTITY_PROCESS_REAUTH_ERROR`, {\n        isUnite: internalIsUnite.toString()\n      });\n      throw e;\n    }\n  };\n\n  const identityObject: WebShellIdentity = {\n    /**\n     * @deprecated identity module is now self-initializing,\n     * this method call can be safely removed\n     */\n    initialize: async () => {\n      await userManagerPromise;\n      return identityObject;\n    },\n    getAccessToken,\n    getInitialized,\n    getIsLoggedIn,\n    getIsMobileVerified,\n    getIsSwooshUser,\n    getUser,\n    getUserProfile,\n    getVisitData,\n    processReauth,\n    processSignIn,\n    processSignOut,\n    signIn,\n    signOut\n  };\n  return identityObject;\n}\n","import type { VisitData } from \"@nike/web-shell-types\";\n\nexport const WEB_SHELL_CLIENT_VISIT_DATA_STORAGE_KEY = `webShellClientVisitData`;\n\nconst defaultVisitData: VisitData = {\n  visitId: 0,\n  visitorId: ``\n};\n\nexport const readVisitData = (): VisitData => {\n  const visitDataString = window.localStorage.getItem(WEB_SHELL_CLIENT_VISIT_DATA_STORAGE_KEY);\n\n  const visitData: VisitData = visitDataString ? JSON.parse(visitDataString) : defaultVisitData;\n\n  return visitData;\n};\n\nexport const writeVisitData = (visitData: VisitData): void => {\n  window.localStorage.setItem(WEB_SHELL_CLIENT_VISIT_DATA_STORAGE_KEY, JSON.stringify(visitData));\n};\n\nexport const removeVisitData = (): void => {\n  window.localStorage.removeItem(WEB_SHELL_CLIENT_VISIT_DATA_STORAGE_KEY);\n};\n","import type {\n  GetLocationsArgument,\n  GetLocationsResult,\n  GetOffersOptions,\n  GetOffersResponse,\n  Location,\n  LocationResult\n} from \"@nike/web-shell-types\";\nimport { WebShellOptimization } from \"@nike/web-shell-types\";\n\nexport class DotcomWebShellAdobeTargetOptimization extends WebShellOptimization {\n  constructor(locations?: Location[]) {\n    super(locations);\n\n    window.newrelic?.addPageAction(`WEB_SHELL_CLIENT_OPTIMIZATION_INITIALIZED`, {\n      webShellClientVersion: process.env.WEB_SHELL_CLIENT_VERSION ?? ``\n    });\n  }\n\n  public getLocations = async (\n    getLocationsArgument?: GetLocationsArgument\n  ): Promise<GetLocationsResult | undefined> => {\n    if (!window.adobe?.target) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Optimization is unable to find Adobe Target. Please check that your application is configured correctly.`\n      );\n      return;\n    }\n\n    const currentLocations = getLocationsArgument?.locations ?? this._locations;\n\n    if (currentLocations.length === 0) {\n      // eslint-disable-next-line no-console\n      console.error(\n        `Locations must be provided either via a function argument or as a part of the Optimization configuration`\n      );\n      return;\n    }\n\n    try {\n      const profile = await this.getUserProfile();\n      const offerOptions = this.getOptions(currentLocations, profile);\n      const offers = await window.adobe.target.getOffers(offerOptions);\n\n      return this.transformAdobeOffersToGetLocationsResult(offers);\n    } catch (error: unknown) {\n      if (window.newrelic?.noticeError) {\n        window.newrelic?.addPageAction(`WEB_SHELL_CLIENT_OPTIMIZATION_ERROR`, {\n          webShellClientVersion: process.env.WEB_SHELL_CLIENT_VERSION ?? ``,\n          host: window.location.host,\n          errorName: (error as Error).name,\n          errorMessage: (error as Error).message,\n          stackTrace: (error as Error).stack ?? ``\n        });\n      }\n\n      // eslint-disable-next-line no-console\n      console.error(`Failed to find locations: ${(error as Error).message}`);\n    }\n  };\n\n  private getUserProfile = async (): Promise<\n    { userId: string | undefined; loggedIn: boolean } | undefined\n  > => {\n    const profile = await window.webShellClient.identity.getUserProfile();\n    return {\n      userId: profile?.upmId,\n      loggedIn: !!profile?.upmId\n    };\n  };\n\n  private getOptions = (\n    locations: Location[],\n    profile: { userId: string | undefined; loggedIn: boolean } | undefined\n  ): GetOffersOptions => ({\n    request: {\n      context: {\n        channel: `web`\n      },\n      experienceCloud: {\n        analytics: {\n          logging: `client_side`\n        }\n      },\n      property: {\n        token: `ae0ecea9-920a-26c9-5042-3a3aab0ff68b`\n      },\n      execute: {\n        mboxes: locations.map((location, index) => ({\n          name: location.name,\n          index,\n          parameters: location.parameters,\n          profileParameters: profile\n        }))\n      }\n    }\n  });\n\n  private transformAdobeOffersToGetLocationsResult = (\n    offers: GetOffersResponse\n  ): GetLocationsResult | undefined => {\n    const locations: LocationResult[] | undefined = offers.execute?.mboxes.map(\n      (mbox): LocationResult => ({\n        name: mbox.name!,\n        content: mbox.options?.[0].content,\n        analytics: mbox.analytics?.payload.tnta\n      })\n    );\n\n    if (locations && locations.length > 0) {\n      return {\n        locations\n      };\n    }\n  };\n}\n","import { WebShellOptimization } from \"@nike/web-shell-types\";\nimport type { GetLocationsResult, Location } from \"@nike/web-shell-types\";\n\nexport class DotcomWebShellNoopOptimization extends WebShellOptimization {\n  constructor(locations?: Location[]) {\n    super(locations);\n    // eslint-disable-next-line no-console\n    console.warn(\n      `Optimization did not initialize. If you expected optimization to be enabled please check your configuration and restart the application.`\n    );\n  }\n\n  // eslint-disable-next-line @typescript-eslint/require-await\n  public getLocations = async (): Promise<GetLocationsResult | undefined> => {\n    // eslint-disable-next-line no-console\n    console.warn(\n      `Optimization is either disabled or failed to initialize correctly so getLocations returns undefined`\n    );\n\n    // eslint-disable-next-line no-useless-return\n    return;\n  };\n}\n","import type {\n  OptimizationInitProperties,\n  WebShellClient,\n  WebShellClientOptions,\n  WebShellOptimization\n} from \"@nike/web-shell-types\";\nimport { DotcomWebShellLocale } from \"./locale\";\nimport { DotcomWebShellTranslations } from \"./translations\";\nimport { ModalManager, defaultModalRoot } from \"./modals\";\nimport { ReactInstanceFactory } from \"./helpers/reactInstanceFactory\";\nimport { DotcomWebShellUserLocation } from \"./userLocation\";\nimport {\n  defaultAnalyticsOptions,\n  dotcomNoopAnalyticsFactory,\n  dotcomWebShellAnalyticsFactory\n} from \"./analytics\";\nimport { makeIdentity } from \"./identity/identity\";\nimport { getWebShellClientInfo } from \"./internal/webShellClientInfo\";\nimport { DotcomWebShellAdobeTargetOptimization } from \"./optimization/adobe/adobeTargetOptimization\";\nimport { DotcomWebShellNoopOptimization } from \"./optimization/noop/noopOptimization\";\n\nexport const defaultWebShellClientOptions: WebShellClientOptions = {\n  appName: `Web Shell Application`,\n  initialLocale: DotcomWebShellLocale.defaultLocale,\n  modal: { rootSelector: defaultModalRoot },\n  isProduction: false,\n  analytics: defaultAnalyticsOptions,\n  optimization: {\n    locations: []\n  }\n};\n\nexport class WebShellClientFactory {\n  static getInstance = (options: WebShellClientOptions): WebShellClient => {\n    const locale = new DotcomWebShellLocale(options.initialLocale);\n    const userLocation = new DotcomWebShellUserLocation();\n    const translations = new DotcomWebShellTranslations(locale);\n    const modalManager = new ModalManager(options.modal?.rootSelector);\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const { getLocations } = WebShellClientFactory.getDotcomWebShellOptimization(\n      options.optimization\n    );\n\n    const identity = makeIdentity({ locale });\n    // Temporary pass through to window.analyticsClient\n    const analyticsOptions = options.analytics ?? defaultWebShellClientOptions.analytics;\n\n    const webShellClientVersion = process.env.WEB_SHELL_CLIENT_VERSION;\n\n    let analytics = dotcomNoopAnalyticsFactory();\n\n    if (typeof window !== `undefined`) {\n      window.newrelic?.addPageAction(`WEB_SHELL_CLIENT_INITIALIZED`, {\n        webShellClientVersion: webShellClientVersion ?? ``\n      });\n\n      if (typeof window.analyticsClient !== `undefined`) {\n        // TODO: Deep-merge this to allow nested objects in https://jira.nike.com/browse/WFLX-932\n        analytics = dotcomWebShellAnalyticsFactory(analyticsOptions!);\n      }\n    }\n\n    return {\n      __VERSION__: webShellClientVersion,\n      appName: options.appName ?? ``,\n      analytics,\n      identity,\n      locale,\n      modalManager,\n      translations,\n      optimization: {\n        __WS_UNSTABLE__: {\n          getLocations\n        }\n      },\n      userLocation,\n      ReactInstanceFactory,\n      isProduction: options.isProduction ?? defaultWebShellClientOptions.isProduction,\n      __WS_INTERNAL__: { getInfo: getWebShellClientInfo }\n    };\n  };\n\n  private static getDotcomWebShellOptimization = (\n    options?: OptimizationInitProperties\n  ): WebShellOptimization => {\n    if (options?.adobe?.enabled) {\n      return new DotcomWebShellAdobeTargetOptimization(options.locations);\n    }\n\n    return new DotcomWebShellNoopOptimization(options?.locations);\n  };\n}\n","import type { VisitData } from \"@nike/web-shell-types\";\n\nconst onUniteInit = (fn): void => {\n  if (typeof window === `undefined`) return;\n  window.addEventListener(`nikeUniteInit`, fn, false);\n};\n\nexport const getUnite = async (): Promise<any> =>\n  new Promise((resolve) => {\n    if (window.nike?.unite && window.nike.unite.isInitialized) {\n      resolve(window.nike.unite);\n      return;\n    }\n    onUniteInit(() => resolve(window.nike?.unite));\n  });\n\nexport const getVisitData = async (): Promise<VisitData> => {\n  const unite = await getUnite();\n  return new Promise((resolve, reject) => {\n    unite?.session?.getVisitData(resolve, reject);\n  });\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","if (window.newrelic?.addRelease) {\n  window.newrelic.addRelease(`web-shell-client`, process.env.WEB_SHELL_CLIENT_VERSION!);\n}\n","import type {\n  WebShellLocale,\n  WebShellClient,\n  WebShellTranslations,\n  WebShellWindow,\n  WebShellUserLocation,\n  WebShellIdentity\n} from \"@nike/web-shell-types\";\nimport { WebShellClientFactory, defaultWebShellClientOptions } from \"./factory\";\n\nexport * from \"./locale\";\nexport * from \"./helpers/reactInstanceFactory\";\nexport * from \"./userLocation\";\n\nexport { ModalManager } from \"./modals\";\n\nconst options =\n  (((global as unknown) as WebShellWindow | undefined) ?? window).__shell ??\n  defaultWebShellClientOptions;\n\nexport type Locale = WebShellLocale;\n\nexport type Translations = WebShellTranslations;\n\nexport type WebShellClientWindow = WebShellWindow;\n\nexport type UserLocation = WebShellUserLocation;\n\nexport type Identity = WebShellIdentity;\nexport const factory = WebShellClientFactory;\n\nconst instance: WebShellClient = WebShellClientFactory.getInstance(options);\n\nexport const {\n  analytics,\n  appName,\n  identity,\n  locale,\n  modalManager,\n  optimization,\n  translations,\n  userLocation,\n  __VERSION__,\n  __WS_INTERNAL__\n} = instance;\n\n// For backwards compatibility before we moved to named exports\n/* eslint-disable import/no-default-export */\n/** @deprecated\n *  Use `import { instance } from \"@nike/web-shell-client\"`\n *  instead as all default exports are slated for removal\n * */\nexport default instance;\n","\"use strict\";\nvar _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_USER_LOCATION_DATA = exports.DEFAULT_LOCALE_DATA = exports.DEFAULT_WEB_SHELL_CLIENT_INFO = exports.ANALYTICS_SCRIPT = exports.NONPROD_UNITE_SCRIPT = exports.PROD_UNITE_SCRIPT = exports.DATA_CAPTURE_SCRIPT = exports.MODAL_ROOT_ID = exports.REMOTE_COMPONENTS_URL = exports.VENDOR_SCRIPT_REACT_DOM_URL = exports.VENDOR_SCRIPT_REACT_URL = exports.HOST_NAME = exports.REMOTE_COMPONENTS_NAME = exports.KEEPALIVE = exports.PRE_FETCH_DEPENDENCIES = void 0;\nexports.PRE_FETCH_DEPENDENCIES = {\n    REACT: `React`,\n    REACT_DOM: `ReactDOM`,\n    REMOTE: `Remote`\n};\nexports.KEEPALIVE = {\n    HTTP_KEEPALIVE_TIMEOUT: 61000,\n    HTTP_HEADERS_TIMEOUT: 65000\n};\nexports.REMOTE_COMPONENTS_NAME = {\n    CMS_THREAD: `CMS_THREAD`,\n    RECOMMENDATIONS: `RECOMMENDATIONS`\n};\nexports.HOST_NAME = (_b = (_a = process.env.WS_HOST_NAME) !== null && _a !== void 0 ? _a : process.env.NEXT_PUBLIC_HOST_NAME) !== null && _b !== void 0 ? _b : process.env.HOST_NAME;\nexports.VENDOR_SCRIPT_REACT_URL = `https://${exports.HOST_NAME}/assets/vendor/react/17.0.2/react.production.min.js`;\nexports.VENDOR_SCRIPT_REACT_DOM_URL = `https://${exports.HOST_NAME}/assets/vendor/react-dom/17.0.2/react-dom.production.min.js`;\nexports.REMOTE_COMPONENTS_URL = {\n    [exports.REMOTE_COMPONENTS_NAME.CMS_THREAD]: `https://${exports.HOST_NAME}/shell/cms_thread/v1`,\n    [exports.REMOTE_COMPONENTS_NAME.RECOMMENDATIONS]: `https://${exports.HOST_NAME}/fragments/recommendations-carousel`\n};\nexports.MODAL_ROOT_ID = `modal-root`;\nexports.DATA_CAPTURE_SCRIPT = (_d = (_c = process.env.WS_DATA_CAPTURE_SCRIPT) !== null && _c !== void 0 ? _c : process.env.NEXT_PUBLIC_DATA_CAPTURE_SCRIPT) !== null && _d !== void 0 ? _d : process.env.DATA_CAPTURE_SCRIPT;\nexports.PROD_UNITE_SCRIPT = (_f = (_e = process.env.WS_PROD_UNITE_SCRIPT) !== null && _e !== void 0 ? _e : process.env.NEXT_PUBLIC_PROD_UNITE_SCRIPT) !== null && _f !== void 0 ? _f : process.env.PROD_UNITE_SCRIPT;\nexports.NONPROD_UNITE_SCRIPT = (_h = (_g = process.env.WS_NONPROD_UNITE_SCRIPT) !== null && _g !== void 0 ? _g : process.env.NEXT_PUBLIC_NONPROD_UNITE_SCRIPT) !== null && _h !== void 0 ? _h : process.env.NONPROD_UNITE_SCRIPT;\nexports.ANALYTICS_SCRIPT = (_k = (_j = process.env.WS_ANALYTICS_SCRIPT) !== null && _j !== void 0 ? _j : process.env.NEXT_PUBLIC_ANALYTICS_SCRIPT) !== null && _k !== void 0 ? _k : process.env.ANALYTICS_SCRIPT;\nexports.DEFAULT_WEB_SHELL_CLIENT_INFO = {\n    identityProvider: null\n};\n/**\n * In supporting a new domain for China, Web Shell default locale should not be relied on.\n * Instead, experience teams are required to set the initial locale to avoid a breaking change.\n */\nexports.DEFAULT_LOCALE_DATA = {\n    cloudUrlFragment: ``,\n    country: `us`,\n    countryName: `United States`,\n    countryNames: {\n        en: `United States`\n    },\n    currency: `USD`,\n    currencySymbol: `$`,\n    default: true,\n    hreflang: `en-US`,\n    intl: `en-US`,\n    langRegion: `en-US`,\n    language: `en`,\n    merchGroup: `US`,\n    urlParam: `en`,\n    translationsLanguage: `en-US`\n};\nexports.DEFAULT_USER_LOCATION_DATA = {\n    country: ``,\n    state: ``,\n    latitude: ``,\n    longitude: ``\n};\n//# sourceMappingURL=constants.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./DataCaptureAnalytics\"), exports);\n__exportStar(require(\"./WebShellAnalytics\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=DataCaptureAnalytics.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=WebShellAnalytics.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=ModalManager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=PreFetchDependencies.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=ReactInstanceFactory.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=RemoteComponentsName.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=UniteCredential.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=WebShellClient.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=WebShellIdentity.js.map","\"use strict\";\n/**\n * The info associated with this file is intended to be accessed in the console for debugging, testing, and developing.\n * It is NOT intended to be coded against.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=WebShellInternal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=WebShellLocale.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebShellOptimization = void 0;\nclass WebShellOptimization {\n    constructor(locations) {\n        this._locations = [];\n        if (locations) {\n            this._locations = locations;\n        }\n    }\n}\nexports.WebShellOptimization = WebShellOptimization;\n//# sourceMappingURL=WebShellOptimization.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=WebShellTranslations.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=WebShellUserLocation.js.map","module.exports = __WEBPACK_EXTERNAL_MODULE__29__;"],"sourceRoot":""}